{
  "version": "2",
  "pipelines": [
    {
      "name": "build",
      "runner": "org.osbuild.centos10",
      "stages": [
        {
          "type": "org.osbuild.rpm",
          "inputs": {
            "packages": {
              "type": "org.osbuild.files",
              "origin": "org.osbuild.source",
              "references": [
                {
                  "id": "sha256:3993c379c029014a9c4b2adf5d23397b3c7421467a0cb3575ff925bb6f6329b0"
                },
                {
                  "id": "sha256:02b2f585447caaaef59cc58cda1cbf6db27530690fdb13f747f3fdeb762c4b15"
                },
                {
                  "id": "sha256:02b2f585447caaaef59cc58cda1cbf6db27530690fdb13f747f3fdeb762c4b15"
                },
                {
                  "id": "sha256:1b11757d33424678ba2d9d6fbd9eb6293a7bfa196dca15a29af179af778c235d"
                },
                {
                  "id": "sha256:a07b0a6df6f248078ebaf93e5bea115093f8a79e0a830e383b6c0b9f7f1605f5"
                },
                {
                  "id": "sha256:a07b0a6df6f248078ebaf93e5bea115093f8a79e0a830e383b6c0b9f7f1605f5"
                },
                {
                  "id": "sha256:8a1bf05d306aa663e856f3c450c8b2ddc6800116b818c7d3b65503cd89f7682a"
                },
                {
                  "id": "sha256:93cd8e20fc07f08337cb9d9fa9996274658f6395574e874379c4c4157e922700"
                },
                {
                  "id": "sha256:93cd8e20fc07f08337cb9d9fa9996274658f6395574e874379c4c4157e922700"
                },
                {
                  "id": "sha256:c1cc69e61c0f1c7ade8df0f2994e582e7c1f2c57d1ec192a0baf9f96b7739d9d"
                },
                {
                  "id": "sha256:360688270679b1c512513cfab6d931c8c715318582a9974caa3c0f88a0ee053c"
                },
                {
                  "id": "sha256:360688270679b1c512513cfab6d931c8c715318582a9974caa3c0f88a0ee053c"
                },
                {
                  "id": "sha256:9e7ab438597fee20e16e8e441bed0ce966bd59e0fb993fa7c94be31fb1384d88"
                },
                {
                  "id": "sha256:9e7ab438597fee20e16e8e441bed0ce966bd59e0fb993fa7c94be31fb1384d88"
                },
                {
                  "id": "sha256:bf35d0b80342ad44ca298ed07fcc9d3f8d43a2700964586a4a5e2c0a49766528"
                },
                {
                  "id": "sha256:bf35d0b80342ad44ca298ed07fcc9d3f8d43a2700964586a4a5e2c0a49766528"
                },
                {
                  "id": "sha256:bf35d0b80342ad44ca298ed07fcc9d3f8d43a2700964586a4a5e2c0a49766528"
                },
                {
                  "id": "sha256:e0031c189e34e10d9c202fa8d75f72d3296a239164fe6b07e7dc206c7b723d98"
                },
                {
                  "id": "sha256:90aebae315675cbf04612de4f7d5874850f48e0b8dd82becbeaa47ca93f5ebfb"
                },
                {
                  "id": "sha256:21fb8eaa1cfa55dbc0ed009dc98fbbbc9de4ecaef53d51dc41ab1b0ae867ed49"
                },
                {
                  "id": "sha256:21fb8eaa1cfa55dbc0ed009dc98fbbbc9de4ecaef53d51dc41ab1b0ae867ed49"
                },
                {
                  "id": "sha256:8ec5e9e6f70bf1a0b5692ef948d1194bdb074342ed14045f9e84820367a98c6a"
                },
                {
                  "id": "sha256:3843603de61d3682536cc569e9ac20e52f5ed00adac5d182511bc452a575d5a8"
                },
                {
                  "id": "sha256:ff6d66bf54dea8b742a0133b5d208f55c39ed16889bb87f98aed9359d76c872d"
                },
                {
                  "id": "sha256:91c11be0bd7ca8f5ef8cbe63f46c9298d3d3d0edc502ed071e9b4804bfdfb740"
                }
              ]
            }
          },
          "options": {}
        },
        {
          "type": "org.osbuild.selinux",
          "options": {
            "file_contexts": "etc/selinux/targeted/contexts/files/file_contexts",
            "labels": {
              "/usr/bin/cp": "system_u:object_r:install_exec_t:s0",
              "/usr/bin/tar": "system_u:object_r:install_exec_t:s0"
            }
          }
        }
      ]
    },
    {
      "name": "os",
      "build": "name:build",
      "stages": [
        {
          "type": "org.osbuild.kernel-cmdline",
          "options": {
            "root_fs_uuid": "a2d72001-423f-4ea2-9854-a3a4fc306314",
            "kernel_opts": "ro"
          }
        },
        {
          "type": "org.osbuild.rpm",
          "inputs": {
            "packages": {
              "type": "org.osbuild.files",
              "origin": "org.osbuild.source",
              "references": [
                {
                  "id": "sha256:443ad85c108c8acb279fc373255ff3444e54cc07c0af87a62962f0adcedd152a"
                },
                {
                  "id": "sha256:5fdc7e383dc7e1b390e40c3012a2aa03978901c45f3597c1c239c51134d03dbe"
                },
                {
                  "id": "sha256:3fc8516922a52d754083308fc413432652da40490b0a336294a5d765757be942"
                },
                {
                  "id": "sha256:02b2f585447caaaef59cc58cda1cbf6db27530690fdb13f747f3fdeb762c4b15"
                },
                {
                  "id": "sha256:5660f11783e742698cec671d45910e74342fe3e48ddf054f38c0828776b08d00"
                },
                {
                  "id": "sha256:5660f11783e742698cec671d45910e74342fe3e48ddf054f38c0828776b08d00"
                },
                {
                  "id": "sha256:e2f24de304a49d3d3c1261466376ab341c3834eb683d806cb534587f4fd48f8d"
                },
                {
                  "id": "sha256:7b50bdd407a8c815d221c01203fc9a241648c79805faa36a0dc70e9d3a46c7e5"
                },
                {
                  "id": "sha256:dbf9956aa9c5ccd4c6d92f0550e959f58bb815fb570c305e9d93645eee2082d4"
                },
                {
                  "id": "sha256:a07b0a6df6f248078ebaf93e5bea115093f8a79e0a830e383b6c0b9f7f1605f5"
                },
                {
                  "id": "sha256:6923dd1bc0460082c5d55a831908c24a282860b7f1cd6c2b79cf1bc8857c639c"
                },
                {
                  "id": "sha256:2c19d6424bd57628cc917ad414752d0135eb9c333b6671568cca9f6c95b8a053"
                },
                {
                  "id": "sha256:2ec46eb16ef55156c58b6348c9552f739a616fb6b4e22367486fe62442e3a9c4"
                },
                {
                  "id": "sha256:bf35d0b80342ad44ca298ed07fcc9d3f8d43a2700964586a4a5e2c0a49766528"
                },
                {
                  "id": "sha256:9370ee4e95b7172989b9fd3f81860093529113ba42b69be340467d87a94bb253"
                },
                {
                  "id": "sha256:aba407b81ed016841ea552feadaf0663c7804a64554ba55d3109b3dc8198cdcb"
                },
                {
                  "id": "sha256:21fb8eaa1cfa55dbc0ed009dc98fbbbc9de4ecaef53d51dc41ab1b0ae867ed49"
                },
                {
                  "id": "sha256:49e9285da13f2be02b3654b01e74cab5840b8c679f7ad4b528a9cf794d3d3e34"
                },
                {
                  "id": "sha256:ec6b0c3970b59b0ca5532cb3dc4dd7239136602223a2d39e7e20fba18298bc62"
                },
                {
                  "id": "sha256:3843603de61d3682536cc569e9ac20e52f5ed00adac5d182511bc452a575d5a8"
                },
                {
                  "id": "sha256:ff6d66bf54dea8b742a0133b5d208f55c39ed16889bb87f98aed9359d76c872d"
                },
                {
                  "id": "sha256:91c11be0bd7ca8f5ef8cbe63f46c9298d3d3d0edc502ed071e9b4804bfdfb740"
                }
              ]
            }
          },
          "options": {}
        },
        {
          "type": "org.osbuild.fix-bls",
          "options": {}
        },
        {
          "type": "org.osbuild.locale",
          "options": {
            "language": "C.UTF-8"
          }
        },
        {
          "type": "org.osbuild.timezone",
          "options": {
            "zone": "UTC"
          }
        },
        {
          "type": "org.osbuild.sysconfig",
          "options": {
            "kernel": {
              "update_default": true,
              "default_kernel": "kernel"
            },
            "network": {
              "networking": true,
              "no_zero_conf": true
            }
          }
        },
        {
          "type": "org.osbuild.fstab",
          "options": {
            "filesystems": [
              {
                "uuid": "a2d72001-423f-4ea2-9854-a3a4fc306314",
                "vfs_type": "xfs",
                "path": "/",
                "options": "defaults"
              },
              {
                "uuid": "7B77-95E7",
                "vfs_type": "vfat",
                "path": "/boot/efi",
                "options": "defaults,uid=0,gid=0,umask=077,shortname=winnt",
                "passno": 2
              }
            ]
          }
        },
        {
          "type": "org.osbuild.grub2",
          "options": {
            "root_fs_uuid": "a2d72001-423f-4ea2-9854-a3a4fc306314",
            "kernel_opts": "ro",
            "legacy": "i386-pc",
            "uefi": {
              "vendor": "centos",
              "unified": true
            },
            "saved_entry": "ffffffffffffffffffffffffffffffff-8-2.fk1.x86_64",
            "write_cmdline": false,
            "config": {
              "default": "saved"
            }
          }
        },
        {
          "type": "org.osbuild.selinux",
          "options": {
            "file_contexts": "etc/selinux/targeted/contexts/files/file_contexts"
          }
        }
      ]
    },
    {
      "name": "image",
      "build": "name:build",
      "stages": [
        {
          "type": "org.osbuild.truncate",
          "options": {
            "filename": "disk.img",
            "size": "4294967296"
          }
        },
        {
          "type": "org.osbuild.sfdisk",
          "options": {
            "label": "gpt",
            "uuid": "D209C89E-EA5E-4FBD-B161-B461CCE297E0",
            "partitions": [
              {
                "bootable": true,
                "size": 2048,
                "start": 2048,
                "type": "21686148-6449-6E6F-744E-656564454649",
                "uuid": "FAC7F1FB-3E8D-4137-A512-961DE09A5549"
              },
              {
                "size": 409600,
                "start": 4096,
                "type": "C12A7328-F81F-11D2-BA4B-00A0C93EC93B",
                "uuid": "68B2905B-DF3E-4FB3-80FA-49D1E773AA33"
              },
              {
                "size": 7974879,
                "start": 413696,
                "type": "0FC63DAF-8483-4772-8E79-3D69D8477DE4",
                "uuid": "6264D520-3FB9-423F-8AB8-7A0A8E3D3562"
              }
            ]
          },
          "devices": {
            "device": {
              "type": "org.osbuild.loopback",
              "options": {
                "filename": "disk.img",
                "lock": true
              }
            }
          }
        },
        {
          "type": "org.osbuild.mkfs.fat",
          "options": {
            "volid": "7B7795E7"
          },
          "devices": {
            "device": {
              "type": "org.osbuild.loopback",
              "options": {
                "filename": "disk.img",
                "start": 4096,
                "size": 409600,
                "lock": true
              }
            }
          }
        },
        {
          "type": "org.osbuild.mkfs.xfs",
          "options": {
            "uuid": "a2d72001-423f-4ea2-9854-a3a4fc306314",
            "label": "root"
          },
          "devices": {
            "device": {
              "type": "org.osbuild.loopback",
              "options": {
                "filename": "disk.img",
                "start": 413696,
                "size": 7974879,
                "lock": true
              }
            }
          }
        },
        {
          "type": "org.osbuild.copy",
          "inputs": {
            "root-tree": {
              "type": "org.osbuild.tree",
              "origin": "org.osbuild.pipeline",
              "references": [
                "name:os"
              ]
            }
          },
          "options": {
            "paths": [
              {
                "from": "input://root-tree/",
                "to": "mount://-/"
              }
            ]
          },
          "devices": {
            "-": {
              "type": "org.osbuild.loopback",
              "options": {
                "filename": "disk.img",
                "start": 413696,
                "size": 7974879
              }
            },
            "boot-efi": {
              "type": "org.osbuild.loopback",
              "options": {
                "filename": "disk.img",
                "start": 4096,
                "size": 409600
              }
            }
          },
          "mounts": [
            {
              "name": "-",
              "type": "org.osbuild.xfs",
              "source": "-",
              "target": "/"
            },
            {
              "name": "boot-efi",
              "type": "org.osbuild.fat",
              "source": "boot-efi",
              "target": "/boot/efi"
            }
          ]
        },
        {
          "type": "org.osbuild.grub2.inst",
          "options": {
            "filename": "disk.img",
            "platform": "i386-pc",
            "location": 2048,
            "core": {
              "type": "mkimage",
              "partlabel": "gpt",
              "filesystem": "xfs"
            },
            "prefix": {
              "type": "partition",
              "partlabel": "gpt",
              "number": 2,
              "path": "/boot/grub2"
            }
          }
        }
      ]
    },
    {
      "name": "vmdk",
      "build": "name:build",
      "stages": [
        {
          "type": "org.osbuild.qemu",
          "inputs": {
            "image": {
              "type": "org.osbuild.files",
              "origin": "org.osbuild.pipeline",
              "references": {
                "name:image": {
                  "file": "disk.img"
                }
              }
            }
          },
          "options": {
            "filename": "image.vmdk",
            "format": {
              "type": "vmdk",
              "subformat": "streamOptimized"
            }
          }
        }
      ]
    },
    {
      "name": "ovf",
      "build": "name:build",
      "stages": [
        {
          "type": "org.osbuild.copy",
          "inputs": {
            "vmdk-tree": {
              "type": "org.osbuild.tree",
              "origin": "org.osbuild.pipeline",
              "references": [
                "name:vmdk"
              ]
            }
          },
          "options": {
            "paths": [
              {
                "from": "input://vmdk-tree/image.vmdk",
                "to": "tree:///"
              }
            ]
          }
        },
        {
          "type": "org.osbuild.ovf",
          "options": {
            "vmdk": "image.vmdk"
          }
        }
      ]
    },
    {
      "name": "archive",
      "build": "name:build",
      "stages": [
        {
          "type": "org.osbuild.tar",
          "inputs": {
            "tree": {
              "type": "org.osbuild.tree",
              "origin": "org.osbuild.pipeline",
              "references": [
                "name:ovf"
              ]
            }
          },
          "options": {
            "filename": "image.ova",
            "format": "ustar",
            "paths": [
              "image.ovf",
              "image.mf",
              "image.vmdk"
            ]
          }
        }
      ]
    }
  ],
  "sources": {
    "org.osbuild.curl": {
      "items": {
        "sha256:02b2f585447caaaef59cc58cda1cbf6db27530690fdb13f747f3fdeb762c4b15": {
          "url": "https://example.com/repo/packages/dosfstools"
        },
        "sha256:1b11757d33424678ba2d9d6fbd9eb6293a7bfa196dca15a29af179af778c235d": {
          "url": "https://example.com/repo/packages/glibc"
        },
        "sha256:21fb8eaa1cfa55dbc0ed009dc98fbbbc9de4ecaef53d51dc41ab1b0ae867ed49": {
          "url": "https://example.com/repo/packages/xfsprogs"
        },
        "sha256:2c19d6424bd57628cc917ad414752d0135eb9c333b6671568cca9f6c95b8a053": {
          "url": "https://example.com/repo/packages/langpacks-en"
        },
        "sha256:2ec46eb16ef55156c58b6348c9552f739a616fb6b4e22367486fe62442e3a9c4": {
          "url": "https://example.com/repo/packages/open-vm-tools"
        },
        "sha256:360688270679b1c512513cfab6d931c8c715318582a9974caa3c0f88a0ee053c": {
          "url": "https://example.com/repo/packages/qemu-img"
        },
        "sha256:3843603de61d3682536cc569e9ac20e52f5ed00adac5d182511bc452a575d5a8": {
          "url": "https://example.com/passed-arch:x86_64/passed-repo:/v2/mirror/public/el10/cs10-x86_64-appstream"
        },
        "sha256:3993c379c029014a9c4b2adf5d23397b3c7421467a0cb3575ff925bb6f6329b0": {
          "url": "https://example.com/repo/packages/coreutils"
        },
        "sha256:3fc8516922a52d754083308fc413432652da40490b0a336294a5d765757be942": {
          "url": "https://example.com/repo/packages/cloud-init"
        },
        "sha256:443ad85c108c8acb279fc373255ff3444e54cc07c0af87a62962f0adcedd152a": {
          "url": "https://example.com/repo/packages/@core"
        },
        "sha256:49e9285da13f2be02b3654b01e74cab5840b8c679f7ad4b528a9cf794d3d3e34": {
          "url": "https://example.com/repo/packages/exclude:dracut-config-rescue"
        },
        "sha256:5660f11783e742698cec671d45910e74342fe3e48ddf054f38c0828776b08d00": {
          "url": "https://example.com/repo/packages/dracut-config-generic"
        },
        "sha256:5fdc7e383dc7e1b390e40c3012a2aa03978901c45f3597c1c239c51134d03dbe": {
          "url": "https://example.com/repo/packages/chrony"
        },
        "sha256:6923dd1bc0460082c5d55a831908c24a282860b7f1cd6c2b79cf1bc8857c639c": {
          "url": "https://example.com/repo/packages/kernel"
        },
        "sha256:7b50bdd407a8c815d221c01203fc9a241648c79805faa36a0dc70e9d3a46c7e5": {
          "url": "https://example.com/repo/packages/firewalld"
        },
        "sha256:8a1bf05d306aa663e856f3c450c8b2ddc6800116b818c7d3b65503cd89f7682a": {
          "url": "https://example.com/repo/packages/platform-python"
        },
        "sha256:8ec5e9e6f70bf1a0b5692ef948d1194bdb074342ed14045f9e84820367a98c6a": {
          "url": "https://example.com/repo/packages/xz"
        },
        "sha256:90aebae315675cbf04612de4f7d5874850f48e0b8dd82becbeaa47ca93f5ebfb": {
          "url": "https://example.com/repo/packages/tar"
        },
        "sha256:91c11be0bd7ca8f5ef8cbe63f46c9298d3d3d0edc502ed071e9b4804bfdfb740": {
          "url": "https://example.com/passed-arch:x86_64/passed-repo:/v2/mirror/public/el10/cs10-x86_64-rt"
        },
        "sha256:9370ee4e95b7172989b9fd3f81860093529113ba42b69be340467d87a94bb253": {
          "url": "https://example.com/repo/packages/shim-x64"
        },
        "sha256:93cd8e20fc07f08337cb9d9fa9996274658f6395574e874379c4c4157e922700": {
          "url": "https://example.com/repo/packages/policycoreutils"
        },
        "sha256:9e7ab438597fee20e16e8e441bed0ce966bd59e0fb993fa7c94be31fb1384d88": {
          "url": "https://example.com/repo/packages/rpm"
        },
        "sha256:a07b0a6df6f248078ebaf93e5bea115093f8a79e0a830e383b6c0b9f7f1605f5": {
          "url": "https://example.com/repo/packages/grub2-pc"
        },
        "sha256:aba407b81ed016841ea552feadaf0663c7804a64554ba55d3109b3dc8198cdcb": {
          "url": "https://example.com/repo/packages/tuned"
        },
        "sha256:bf35d0b80342ad44ca298ed07fcc9d3f8d43a2700964586a4a5e2c0a49766528": {
          "url": "https://example.com/repo/packages/selinux-policy-targeted"
        },
        "sha256:c1cc69e61c0f1c7ade8df0f2994e582e7c1f2c57d1ec192a0baf9f96b7739d9d": {
          "url": "https://example.com/repo/packages/python3"
        },
        "sha256:dbf9956aa9c5ccd4c6d92f0550e959f58bb815fb570c305e9d93645eee2082d4": {
          "url": "https://example.com/repo/packages/grub2-efi-x64"
        },
        "sha256:e0031c189e34e10d9c202fa8d75f72d3296a239164fe6b07e7dc206c7b723d98": {
          "url": "https://example.com/repo/packages/systemd"
        },
        "sha256:e2f24de304a49d3d3c1261466376ab341c3834eb683d806cb534587f4fd48f8d": {
          "url": "https://example.com/repo/packages/efibootmgr"
        },
        "sha256:ec6b0c3970b59b0ca5532cb3dc4dd7239136602223a2d39e7e20fba18298bc62": {
          "url": "https://example.com/repo/packages/exclude:rng-tools"
        },
        "sha256:ff6d66bf54dea8b742a0133b5d208f55c39ed16889bb87f98aed9359d76c872d": {
          "url": "https://example.com/passed-arch:x86_64/passed-repo:/v2/mirror/public/el10/cs10-x86_64-baseos"
        }
      }
    }
  }
}
